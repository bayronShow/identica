{% extends 'profiles/base.html' %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h2 class="text-success mb-1">üéì –ü–∞–Ω–µ–ª—å –∫—É—Ä–∞—Ç–æ—Ä–∞ {{ profile.course }} –∫—É—Ä—Å–∞</h2>
                <p class="text-muted mb-0">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—É—Ä—Å–æ–º –∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —Å–æ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏</p>
            </div>
        </div>
    </div>
</div>

<!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—É—Ä—Å–∞ -->
<div class="row mb-4">
    <div class="col-md-3">
        <div class="card bg-primary text-white">
            <div class="card-body text-center">
                <h4>{{ total_students }}</h4>
                <small>–°—Ç—É–¥–µ–Ω—Ç–æ–≤ –Ω–∞ –∫—É—Ä—Å–µ</small>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card bg-success text-white">
            <div class="card-body text-center">
                <h4>{{ groups_count }}</h4>
                <small>–£—á–µ–±–Ω—ã—Ö –≥—Ä—É–ø–ø</small>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card bg-warning text-white">
            <div class="card-body text-center">
                <h4>{{ active_monitors }}</h4>
                <small>–ê–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ç–∞—Ä–æ—Å—Ç</small>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card bg-info text-white">
            <div class="card-body text-center">
                <h4>95%</h4>
                <small>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫—É—Ä—Å–∞</small>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ -->
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">üëë –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏</h5>
            </div>
            <div class="card-body">
                <div class="alert alert-info">
                    <small>–§—É–Ω–∫—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–æ–ª—è–º–∏ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏</small>
                </div>
                
                <div class="mt-3 p-3 bg-light rounded">
                    <h6>üìã –¢–µ–∫—É—â–µ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π:</h6>
                    <ul class="list-unstyled mb-0">
                        <li>üéì –°—Ç—É–¥–µ–Ω—Ç—ã: {{ total_students }}</li>
                        <li>üë®‚Äçüíº –°—Ç–∞—Ä–æ—Å—Ç—ã: {{ active_monitors }}</li>
                        <li>üéØ –ö—É—Ä–∞—Ç–æ—Ä—ã: 1</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π -->
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">üì¢ –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è</h5>
            </div>
            <div class="card-body">
                <div class="alert alert-info">
                    <small>–§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ —Å–ª–µ–¥—É—é—â–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏</small>
                </div>
                
                <div class="d-grid gap-2">
                    <button class="btn btn-outline-primary">
                        üì¢ –°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –¥–ª—è –∫—É—Ä—Å–∞
                    </button>
                    <button class="btn btn-outline-success">
                        üìß –ú–∞—Å—Å–æ–≤–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –ë—ã—Å—Ç—Ä–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≥—Ä—É–ø–ø–∞–º -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≥—Ä—É–ø–ø–∞–º –∫—É—Ä—Å–∞</h5>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>–ì—Ä—É–ø–ø–∞</th>
                                <th>–°—Ç—É–¥–µ–Ω—Ç–æ–≤</th>
                                <th>–°—Ç–∞—Ä–æ—Å—Ç–∞</th>
                                <th>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for student in students|slice:":5" %}
                            <tr>
                                <td><strong>{{ student.group|default:"‚Äî" }}</strong></td>
                                <td>
                                    {% if student.group %}
                                        {{ total_students|add:"0"|divisibleby:5|yesno:"5,10,15,20,25" }}
                                    {% else %}
                                        ‚Äî
                                    {% endif %}
                                </td>
                                <td>
                                    {% if student.role == 'monitor' %}
                                        {{ student.user.get_full_name|default:student.user.username }}
                                    {% else %}
                                        ‚Äî
                                    {% endif %}
                                </td>
                                <td>
                                    <div class="progress" style="height: 8px;">
                                        <div class="progress-bar bg-success" style="width: 85%"></div>
                                    </div>
                                </td>
                                <td>
                                    <span class="badge bg-success">–ê–∫—Ç–∏–≤–Ω–∞</span>
                                </td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="5" class="text-center text-muted py-3">
                                    –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –≥—Ä—É–ø–ø–∞—Ö
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}