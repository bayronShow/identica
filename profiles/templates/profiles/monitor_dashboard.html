{% extends 'profiles/base.html' %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h2 class="text-success mb-1">üë®‚Äçüíº –ü–∞–Ω–µ–ª—å —Å—Ç–∞—Ä–æ—Å—Ç—ã –≥—Ä—É–ø–ø—ã {{ profile.group }}</h2>
                <p class="text-muted mb-0">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</p>
            </div>
        </div>
    </div>
</div>

<!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥—Ä—É–ø–ø—ã -->
<div class="row mb-4">
    <div class="col-md-3">
        <div class="card bg-primary text-white">
            <div class="card-body text-center">
                <h4>{{ total_students }}</h4>
                <small>–°—Ç—É–¥–µ–Ω—Ç–æ–≤ –≤ –≥—Ä—É–ø–ø–µ</small>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card bg-success text-white">
            <div class="card-body text-center">
                <h4>{{ completed_profiles }}</h4>
                <small>–ó–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π</small>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card bg-warning text-white">
            <div class="card-body text-center">
                <h4>{{ total_students }}</h4>
                <small>–í—Å–µ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</small>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card bg-info text-white">
            <div class="card-body text-center">
                <h4>85%</h4>
                <small>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≥—Ä—É–ø–ø—ã</small>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <!-- –°–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –≥—Ä—É–ø–ø—ã -->
    <div class="col-md-8">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="mb-0">üë• –°—Ç—É–¥–µ–Ω—Ç—ã –≥—Ä—É–ø–ø—ã {{ profile.group }}</h5>
                <span class="badge bg-primary">{{ students.count }} —á–µ–ª–æ–≤–µ–∫</span>
            </div>
            <div class="card-body">
                {% if students %}
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead class="table-light">
                                <tr>
                                    <th>–§–ò–û</th>
                                    <th>–°—Ç—É–¥–µ–Ω—á–µ—Å–∫–∏–π –±–∏–ª–µ—Ç</th>
                                    <th>–†–æ–ª—å</th>
                                    <th>–°—Ç–∞—Ç—É—Å –ø—Ä–æ—Ñ–∏–ª—è</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for student in students %}
                                <tr>
                                    <td>
                                        <strong>{{ student.user.get_full_name|default:student.user.username }}</strong>
                                    </td>
                                    <td>{{ student.student_id|default:"‚Äî" }}</td>
                                    <td>
                                        {% if student.role == 'monitor' %}
                                            <span class="badge bg-warning">–°—Ç–∞—Ä–æ—Å—Ç–∞</span>
                                        {% elif student.role == 'student' %}
                                            <span class="badge bg-primary">–°—Ç—É–¥–µ–Ω—Ç</span>
                                        {% else %}
                                            <span class="badge bg-secondary">{{ student.get_role_display }}</span>
                                        {% endif %}
                                    </td>
                                    <td>
                                        {% if student.student_id and student.faculty and student.course and student.group %}
                                            <span class="badge bg-success">‚úÖ –ó–∞–ø–æ–ª–Ω–µ–Ω</span>
                                        {% else %}
                                            <span class="badge bg-warning">‚ö†Ô∏è –ù–µ–ø–æ–ª–Ω—ã–π</span>
                                        {% endif %}
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {% else %}
                    <div class="text-center py-4">
                        <p class="text-muted">–í –≤–∞—à–µ–π –≥—Ä—É–ø–ø–µ –Ω–µ—Ç –¥—Ä—É–≥–∏—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤.</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –±—ã—Å—Ç—Ä—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏ -->
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">‚ö° –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h5>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <a href="{% url 'manage_subscriptions' %}" class="btn btn-outline-success">
                        üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
                    </a>
                    <a href="{% url 'profile' %}" class="btn btn-outline-info">
                        ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
                    </a>
                    <button class="btn btn-outline-primary">
                        üìä –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
                    </button>
                </div>
            </div>
        </div>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥—Ä—É–ø–ø–µ -->
        <div class="card mt-3">
            <div class="card-header">
                <h5 class="mb-0">‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≥—Ä—É–ø–ø–µ</h5>
            </div>
            <div class="card-body">
                <p><strong>–ì—Ä—É–ø–ø–∞:</strong> {{ profile.group }}</p>
                <p><strong>–ö—É—Ä—Å:</strong> {{ profile.course }}</p>
                <p><strong>–§–∞–∫—É–ª—å—Ç–µ—Ç:</strong> {{ profile.get_faculty_display }}</p>
                <p><strong>–°—Ç–∞—Ä–æ—Å—Ç–∞:</strong> {{ profile.user.get_full_name|default:profile.user.username }}</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}