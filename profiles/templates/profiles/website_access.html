{% extends 'profiles/base.html' %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h2 class="text-success">üåê –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∞–π—Ç–∞–º</h2>
        <p class="text-muted">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫ –∫–∞–∫–∏–º —Å–∞–π—Ç–∞–º —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ LDAP</p>
    </div>
</div>

<!-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–∞–π—Ç–∞ -->
<div class="row mb-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–∞–π—Ç—É</h5>
            </div>
            <div class="card-body">
                <form method="get" class="row g-3">
                    <div class="col-md-8">
                        <input type="url" name="url" class="form-control" 
                               placeholder="–í–≤–µ–¥–∏—Ç–µ URL —Å–∞–π—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: https://library.university.local)" 
                               value="{{ checked_url }}">
                    </div>
                    <div class="col-md-4">
                        <button type="submit" class="btn btn-primary w-100">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø</button>
                    </div>
                </form>
                
                {% if checked_url %}
                    <div class="mt-3">
                        {% if specific_access %}
                            <div class="alert alert-success">
                                <strong>‚úÖ –î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à–µ–Ω!</strong> 
                                <br>–£ –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–∞–π—Ç—É: <strong>{{ checked_url }}</strong>
                            </div>
                        {% else %}
                            <div class="alert alert-danger">
                                <strong>‚ùå –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω!</strong>
                                <br>–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–∞–π—Ç—É: <strong>{{ checked_url }}</strong>
                            </div>
                        {% endif %}
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!-- –°–ø–∏—Å–æ–∫ —Å–∞–π—Ç–æ–≤ —Å –¥–æ—Å—Ç—É–ø–æ–º -->
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞–º —Å–∞–π—Ç—ã</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    {% for website in accessible_websites %}
                    <div class="col-md-6 mb-3">
                        <div class="card {% if website.access_granted %}border-success{% else %}border-danger{% endif %}">
                            <div class="card-body">
                                <h6 class="card-title">{{ website.name }}</h6>
                                <p class="card-text text-muted small">{{ website.description }}</p>
                                <p class="card-text">
                                    <small>URL: <code>{{ website.url }}</code></small>
                                </p>
                                <div class="d-flex justify-content-between align-items-center">
                                    {% if website.access_granted %}
                                        <span class="badge bg-success">‚úÖ –î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à–µ–Ω</span>
                                        <a href="{{ website.url }}" target="_blank" class="btn btn-sm btn-outline-success">
                                            –ü–µ—Ä–µ–π—Ç–∏
                                        </a>
                                    {% else %}
                                        <span class="badge bg-danger">‚ùå –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω</span>
                                        <button class="btn btn-sm btn-outline-secondary" disabled>
                                            –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞
                                        </button>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                    {% empty %}
                    <div class="col-12">
                        <p class="text-muted text-center">–ù–µ—Ç —Å–∞–π—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏</p>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}