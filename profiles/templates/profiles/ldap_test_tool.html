{% extends 'profiles/base.html' %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h2 class="text-success">üîê –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ LDAP –¥–æ—Å—Ç—É–ø–∞</h2>
        <p class="text-muted">–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø –∫ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–º —Å–∞–π—Ç–∞–º —á–µ—Ä–µ–∑ LDAP –≥—Ä—É–ø–ø—ã</p>
    </div>
</div>

<!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
<div class="row mb-4">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">üë§ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h5>
            </div>
            <div class="card-body">
                <p><strong>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</strong> {{ user_ldap_info.username }}</p>
                <p><strong>–ò–º—è:</strong> {{ user_ldap_info.first_name }} {{ user_ldap_info.last_name }}</p>
                <p><strong>Email:</strong> {{ user_ldap_info.email }}</p>
                <p><strong>–ì—Ä—É–ø–ø—ã LDAP:</strong></p>
                <div class="d-flex flex-wrap gap-2">
                    {% for group in user_groups %}
                        <span class="badge bg-primary">{{ group }}</span>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">üåê –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∞–π—Ç–æ–≤</h5>
            </div>
            <div class="card-body">
                <form method="get" class="mb-3">
                    <div class="input-group">
                        <input type="url" name="test_url" class="form-control" 
                               placeholder="–í–≤–µ–¥–∏—Ç–µ URL —Å–∞–π—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏" 
                               value="{{ test_result.url|default:'' }}" required>
                        <button type="submit" class="btn btn-primary">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
                    </div>
                </form>
                
                {% if test_result %}
                    <div class="alert {% if test_result.access_granted %}alert-success{% else %}alert-danger{% endif %}">
                        <h6>–†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:</h6>
                        <strong>–°–∞–π—Ç:</strong> {{ test_result.url }}<br>
                        <strong>–î–æ—Å—Ç—É–ø:</strong> 
                        {% if test_result.access_granted %}
                            <span class="text-success">‚úÖ –†–ê–ó–†–ï–®–ï–ù</span>
                        {% else %}
                            <span class="text-danger">‚ùå –ó–ê–ü–†–ï–©–ï–ù</span>
                        {% endif %}
                    </div>
                {% endif %}
                
                <div class="mt-3">
                    <h6>–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å–∞–π—Ç—ã:</h6>
                    <div class="d-flex flex-wrap gap-2">
                        {% for site in popular_sites %}
                            <a href="?test_url={{ site.url }}" class="btn btn-sm btn-outline-secondary">
                                {{ site.name }}
                            </a>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–∞–π—Ç–æ–≤ -->
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">üìã –í—Å–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º—ã–µ —Å–∞–π—Ç—ã</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    {% for website in accessible_websites %}
                    <div class="col-md-6 mb-3">
                        <div class="card {% if website.access_granted %}border-success{% else %}border-danger{% endif %}">
                            <div class="card-body">
                                <div class="d-flex justify-content-between align-items-start">
                                    <div>
                                        <h6 class="card-title">{{ website.name }}</h6>
                                        <p class="card-text text-muted small mb-1">{{ website.description }}</p>
                                        <small class="text-muted">URL: <code>{{ website.url }}</code></small>
                                    </div>
                                    <div class="text-end">
                                        {% if website.access_granted %}
                                            <span class="badge bg-success">‚úÖ –î–æ—Å—Ç—É–ø –µ—Å—Ç—å</span>
                                            <br>
                                            <a href="{{ website.url }}" target="_blank" class="btn btn-sm btn-success mt-1">
                                                –ü–µ—Ä–µ–π—Ç–∏
                                            </a>
                                        {% else %}
                                            <span class="badge bg-danger">‚ùå –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞</span>
                                            <br>
                                            <a href="?test_url={{ website.url }}" class="btn btn-sm btn-outline-danger mt-1">
                                                –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
                                            </a>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>

<!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">üìñ –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å</h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>–¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:</h6>
                        <ul>
                            <li><strong>student1</strong> / <strong>password123</strong> - –æ–±—ã—á–Ω—ã–π —Å—Ç—É–¥–µ–Ω—Ç</li>
                            <li><strong>monitor1</strong> / <strong>password123</strong> - —Å—Ç–∞—Ä–æ—Å—Ç–∞</li>
                            <li><strong>admin</strong> / <strong>admin123</strong> - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6>–ü—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–∞:</h6>
                        <ul>
                            <li><strong>–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞</strong> - —Å—Ç—É–¥–µ–Ω—Ç—ã, –ø–µ—Ä—Å–æ–Ω–∞–ª, –∞–¥–º–∏–Ω—ã</li>
                            <li><strong>–ù–∞—É—á–Ω—ã–π –ø–æ—Ä—Ç–∞–ª</strong> - –ø–µ—Ä—Å–æ–Ω–∞–ª, –∞–¥–º–∏–Ω—ã, —Å—Ç–∞—Ä–æ—Å—Ç—ã</li>
                            <li><strong>–ê–¥–º–∏–Ω–∫–∞</strong> - —Ç–æ–ª—å–∫–æ –ø–µ—Ä—Å–æ–Ω–∞–ª –∏ –∞–¥–º–∏–Ω—ã</li>
                            <li><strong>GitHub</strong> - —Ç–æ–ª—å–∫–æ –ø–µ—Ä—Å–æ–Ω–∞–ª –∏ –∞–¥–º–∏–Ω—ã</li>
                            <li><strong>–Ø–Ω–¥–µ–∫—Å/Google</strong> - –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</li>
                        </ul>
                    </div>
                </div>
                <div class="alert alert-info mt-3">
                    <strong>üí° –°–æ–≤–µ—Ç:</strong> –í–æ–π–¥–∏—Ç–µ –ø–æ–¥ —Ä–∞–∑–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ä–∞–∑–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞!
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}